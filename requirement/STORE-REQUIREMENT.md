## 가게 요구사항 정리

### 문서의 목적

이 문서에서는 **[ 16조 - 딜리버리 앱 아웃소싱 팀 프로젝트 ]** 의 가게 요구 사항을 정의합니다.
(각각 요구사항 문서 작성 후 통합할 예정)
-----

### 문서 기본 정보

- **작성자** : 3BodyProgrammers
- **작성일** : 2025.03.01 (토)

-----

### 가게 요구사항 - (전탁 작성 2025.03.01)

#### 가게 생성
- 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액이 존재 해야 한다.
- 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액 중 하나 라도 조건에 맞지 않으면, 예외 처리 한다.(@Valid)
- 가게를 생성 하려는 유저는 반드시 OWNER 여야 한다.
- OWNER는 가게를 최대 3개 까지만 운영 할 수 있다.
- 동일한 이름의 가게가 존재 한다면, 예외 처리 한다.
- 가게가 성공적으로 등록 되면 가게 id, 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액, 휴일, 생성일, 수정일을 담은 dto 객체를 반환 해야 한다.

#### 전체 가게 조회
- 가게 이름, 페이지 번호, 페이지 크기로 조회할 수 있어야 한다.
- 가게 이름, 페이지 번호, 페이지 크기는 선택 사항 이다. -> 기본값을 사용하면 전체, 0번, 10개의 Page 형태로 조회 된다.
- 전체 가게 조회 시에는 메뉴 목록을 함께 볼 수 없다.
- 반환은 가게 id, 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액, 휴일, 생성일, 수정일을 반환한다.

#### 단건 가게 조회
- 가게 id를 통해 조회할 수 있어야 한다.
- 가게 조회 시, 전체 메뉴 리스트를 같이 조회 하여야 한다.
- 만약 id에 해당하는 가게가 없다면, 예외 처리 한다.
- 반환은 가게 id, 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액, 메뉴 리스트, 휴일, 생성일, 수정일을 반환한다.
- 메뉴 리스트의 메뉴는 메뉴 id, 메뉴 이름, 메뉴 가격을 가지고 있어야 한다.

#### 가게 수정
- 가게 id를 통해 수정할 수 있어야 한다.
- 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액이 존재 해야 한다.
- 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액 중 하나 라도 조건에 맞지 않으면, 예외 처리 한다.(@Valid)
- 수정하려는 가게가 없다면 예외처리 한다.
- 가게를 수정 하려는 유저는 반드시 OWNER 여야 한다.
- 수정하려는 OWNER와 가게의 OWNER가 같아야 한다.
- 가게가 성공적으로 수정 되면 가게 id, 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액, 휴일, 생성일, 수정일을 담은 dto 객체를 반환 해야 한다.

#### 가게 폐업(삭제)
- 가게 id를 통해 폐업할 수 있어야 한다.
- 폐업하려는 가게가 없다면 예외처리 한다.
- 폐업 요청한 사용자는 반드시 OWNER이어야 한다.
- 폐업하려는 가게의 사장님과 폐업 요청한 사용자가 다르다면 예외처리 한다.
- 폐업하려는 가게가 존재한다면, 가게의 deleted_At에 현재 시간을 저장한다.
- 또한, 해당 가게의 메뉴들도 deleted_At에 현재 시간을 저장한다.

-----

### 가게 휴일 요구사항 - (전탁 작성 2025.03.02)

#### 가게 휴일 수정
- 가게 휴일에 해당하는 값이 존재해야 한다.
- 해당 값들은 비트마스킹을 사용해 하나의 정수로 표현해야 한다.
- 월,화,수,목,금,토,일 이 아닌 값이 들어오면 예외처리 해야한다.
- id에 해당하는 가게가 존재하지 않는다면 예외 처리 한다.
- 휴일 수정한 요청자가 OWNER가 아니라면 예외 처리 한다.
- 휴일 수정을 요청한 사용자가 가게 사장님이 아니라면 에외 처리 한다.
- 비트마스킹 된 값으로 휴일을 업데이트 한다.
- 업데이트 이후 가게 id, 가게 이름, 오픈 시간, 마감 시간, 최소 주문 금액, 휴일, 생성일, 수정일을 반환 해야 한다.

#### 휴일과 비트마스킹된 값 변환
- 휴일에 대한 값과 비트마스킹 된 값은 서로 변환이 되어야 한다.
- 월 : 1, 화 : 2, 수 : 4, 목 : 8, 금 : 16, 토 : 32, 일 : 64
- EX) 월 수가 휴일이라면 비트마스킹 된 값은 5 이다.
- EX) 비트마스킹 된 값이 12라면, 휴일은 수 목 이다.

-----