## 리뷰 요구사항 정리 📝


### 문서의 목적

- 이 문서에서는 **[ 16조 - 딜리버리 앱 아웃소싱 팀 프로젝트 ]** 의 리뷰 요구 사항을 정의합니다.
  (각각 요구사항 문서 작성 후 통합할 예정)
---

### 문서 기본 정보

- **작성자** : 3BodyProgrammers
- **작성일** : 2025.03.05 (수)

---

### 리뷰 요구사항 - (김유란 작성 2025.03.05)

#### 리뷰 생성
- 별점, 평가가 존재해야 한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 별점은 1~5 사이의 값을 가진다.
- OWNER는 리뷰를 작성할 수 없다.
- 이미 리뷰가 작성된 적 있는 주문이면 예외 처리한다.
- 배달 완료된 주문에만 리뷰를 작성할 수 있다.
- 주문에 대한 리뷰가 이미 존재하면 예외 처리한다.
- 생성 성공 시 id, userId, storeId, orderId, 별점, 평가, 생성일, 수정일을 반환한다.

#### 리뷰 조회
- 모든 유저는 가게 정보 기준으로 리뷰를 다건 조회할 수 있다.
- 페이지 번호, 페이지 크기로 조회할 수 있어야 한다.
- 별점 범위에 따라 조회할 수 있어야 한다.
- 리뷰 조회 시 리뷰 생성일을 기준으로 내림차순 정렬된다.
- 조회 시 [id, userId, storeId, orderId, 별점, 평가, 생성일, 수정일]이 페이지 형태로 반환되고, 리뷰 총 개수와 별점 평균이 함께 반환된다.

#### 리뷰 수정
- 별점, 평가가 존재해야 한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- OWNER는 리뷰를 수정할 수 없다.
- 리뷰를 찾을 수 없거나 삭제된 리뷰면 예외 처리한다.
- 본인이 작성한 리뷰만 수정할 수 있다.
- 수정 성공 시 id, userId, storeId, orderId, 별점, 평가, 생성일, 수정일을 반환한다.

#### 리뷰 삭제
- OWNER는 리뷰를 삭제할 수 없다.
- 리뷰를 찾을 수 없거나 이미 삭제된 리뷰면 예외 처리한다.
- 본인이 작성한 리뷰만 삭제할 수 있다.
- 리뷰 삭제 시 해당 주문에 다시 리뷰를 생성할 수 없다.
- 리뷰 삭제 시 리뷰의 deletedAt에 현재 시간을 저장한다.
- 삭제 성공 시 "리뷰 삭제가 완료되었습니다." 메세지를 반환한다.

---